<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../hw_main_pages.css">
        <link rel="stylesheet" type="text/css" href="../hw_link_pages.css">
        <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.validate/1.13.1/jquery.validate.min.js"></script>
        <script src="hw5_scripts.js"></script>
        <meta name="description" content="CLIN's CNIT 133 Homework 4 Part 1.">
        <title>HW5-Part 3 Some State Information </title>
        <script>
/* PART 3.STATE DATA
   Author: CLIN
   DATE: 2018-03-31 
   PURPOSE: Using two dimensional array of state data.
   Need to identify state by name or abbreviate (case insensitive)
   
   STEP 1. Create two dimensional array each state is a row with 4 columns
           state abbreviation, state name, state capitol, and population.
   STEP 2. Create searchable single dimension array of search terms 
   STEP 3. take user input and validate return name capitol and population in text fields.
*/
            var myState = [['AL', 'Alabama', 'Montgomery', 4779736],
                           ['AK', 'Akaska', 'Juneau', 710231],
                           ['AZ', 'Arizona', 'Phoenix', 6392017],
                           ['AR', 'Arkansas', 'Little Rock', 2915918],
                           ['CA', 'California', 'Sacramento', 37253956],
                           ['CO', 'Colorado', 'Denver', 5029196]         
                          ];
// creating search array from first two columns in myState array with all characters upper case.
// https://stackoverflow.com/questions/7848004/get-column-from-a-two-dimensional-array-in-javascript
            var searchArray = myState.map(x => x[0]).concat(myState.map(x => x[1]));
            searchArray = searchArray.map(function(x){return x.toUpperCase()})
// jquery validation and mapping of a single column reference.
// https://stackoverflow.com/questions/5696222/jquery-validator-check-input-against-a-list-of-accepted-values              
            jQuery.validator.addMethod("isstate", function(value) {
                return $.inArray(value.toUpperCase(), searchArray) != -1;
            }, "Data provided is not a valid state");
            
            $(document).ready(function(){
            $("#stateForm").validate();
            $("#dispInst").hide();
            $("#instButton").click(function(){
                $("#dispInst").show();
                $("#dispInst").delay(4000).fadeOut('slow');
            });

            }); 

            function getStateData(pState){
                 if($('#stateForm').valid()){
                    
                    var stateIndex = searchArray.indexOf(pState.toUpperCase())%myState.length
                    document.forms["stateForm"].elements["stateNameOut"].value = myState[stateIndex][1]
                    document.forms["stateForm"].elements["stateCapitolOut"].value = myState[stateIndex][2]
                    document.forms["stateForm"].elements["statePopOut"].value = 
                          Number(myState[stateIndex][3]).toLocaleString()
                 }
            };
            
        </script>
    </head>
    <body>
        <section>
            <h1>HW5 Part 3 - Information on Select States</h1>
            <script>createNavMenu();</script> 
            <form id="stateForm" name="stateForm">
                <table>
                    <tr>
                        <td><label for="stateIn">Please enter State Name or State Abbreviation: </label></td>
                        <td><input type="text" id="stateIn" name="stateIn" class="isstate"></td>
                        <td><input type="button" value="State Info" onclick="getStateData(document.getElementById('stateIn').value)"></td>
                    </tr>
                    
                  </tr>
                </table>
                <br>
                <br>
                <table>    
                    <tr>
                        <th><label>State Name</label></th>
                        <th><label>State Capitol</label></th>
                        <th><label>Population</label></th>
                    </tr>
                    <tr>
                        <td>
                            <input type="text" id="stateNameOut" 
                                   name="stateNameOut" disabled="disabled">
                        </td>
                        <td>
                            <input type="text" id="stateCapitolOut" 
                                   name="stateCapitolOut" disabled="disabled">
                        </td>
                        <td>
                            <input type="text" id="statePopOut" 
                                   name="statePopOut" class="nums" disabled="disabled">
                        </td>
                    </tr>
                </table>
            </form>
            <br>
                <button id="instButton">Display Instructions</button>
            <div id="dispInst">
                    Enter a state abbreviation or name (lower or upper case is ok)
            </div>
        </section>
    </body>

</html>